<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cadastro - RF Driver</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  font-family:Inter;
  background:#0d0d0d;
  color:#f4f4f4;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
}
.card{
  background:#161616;
  padding:24px;
  border-radius:16px;
  width:100%;
  max-width:380px;
}
input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:10px;
  border:none;
}
button{
  background:#f5c542;
  font-weight:700;
}
small{opacity:.7}
.forca{margin-top:6px;font-size:13px}
.fraca{color:#ff3b30}
.media{color:#f5c542}
.forte{color:#1DB954}
.toggle{
  font-size:13px;
  cursor:pointer;
  margin-top:4px;
  display:inline-block;
}
</style>
</head>

<body>

<div class="card">
  <h2>Criar conta</h2>

  <input id="nome" placeholder="Nome">
  <input id="email" placeholder="Email">
  <input id="email2" placeholder="Confirmar email">

  <input id="senha" type="password" placeholder="Senha" oninput="avaliarSenha()">
  <span class="toggle" onclick="toggleSenha()">üëÅ Mostrar senha</span>
  <div id="nivelSenha" class="forca"></div>

  <button onclick="cadastrar()">Criar conta</button>

  <p id="msg"></p>
</div>

<script src="dataManager.js"></script>
<script src="js/global.js"></script>

<script>

function toggleSenha(){
  senha.type = senha.type === "password" ? "text" : "password";
}

function avaliarSenha(){
  const v = senha.value;
  let nivel = 0;

  if(v.length >= 6) nivel++;
  if(/[A-Z]/i.test(v)) nivel++;
  if(/[0-9]/.test(v)) nivel++;
  if(/[^A-Za-z0-9]/.test(v)) nivel++;

  if(nivel <= 1){
    nivelSenha.textContent = "Senha fraca";
    nivelSenha.className = "forca fraca";
  } else if(nivel === 2 || nivel === 3){
    nivelSenha.textContent = "Senha m√©dia";
    nivelSenha.className = "forca media";
  } else {
    nivelSenha.textContent = "Senha forte";
    nivelSenha.className = "forca forte";
  }

  return nivel >= 2;
}

function cadastrar(){

  if(email.value !== email2.value){
    msg.textContent = "Os emails n√£o conferem";
    return;
  }

  if(senha.value !== senha2.value){
    msg.textContent = "As senhas n√£o conferem";
    return;
  }

  if(!avaliarSenha()){
    msg.textContent = "Escolha uma senha mais forte";
    return;
  }

  const r = AuthManager.cadastrar({
    nome: nome.value,
    email: email.value,
    senha: senha.value
  });

  if(r.erro){
    msg.textContent = r.erro;
    return;
  }

  // üëâ REDIRECIONA PARA PERFIL (PRIMEIRA P√ÅGINA)
  window.location.href = "perfil.html";
}

</script>

</body>
</html>
